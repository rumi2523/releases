<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Music Player</title>

<style>
:root {
    --bg: #121212;
    --card: #181818;
    --accent: #1db954;
    --text: #ffffff;
    --muted: #b3b3b3;
}

body {
    margin: 0;
    background: var(--bg);
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    color: var(--text);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

.player {
    width: 95%;
    max-width: 500px;
    background: var(--card);
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}

.track-info {
    text-align: center;
    margin-bottom: 20px;
}

.track-title {
    font-size: 18px;
    font-weight: 600;
}

.time {
    font-size: 12px;
    color: var(--muted);
}

.progress-container {
    background: #333;
    border-radius: 5px;
    cursor: pointer;
    height: 6px;
    margin: 15px 0;
}

.progress {
    background: var(--accent);
    height: 100%;
    width: 0%;
    border-radius: 5px;
}

.controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
}

button {
    background: none;
    border: none;
    color: var(--text);
    font-size: 18px;
    cursor: pointer;
}

button:hover {
    color: var(--accent);
}

.play-btn {
    font-size: 28px;
}

.volume-container {
    margin-top: 15px;
}

input[type=range] {
    width: 100%;
    accent-color: var(--accent);
}
</style>
</head>
<body>

<div class="player">
    <div class="track-info">
        <div class="track-title">Loading...</div>
        <div class="time">
            <span id="current">0:00</span> / 
            <span id="duration">0:00</span>
        </div>
    </div>

    <div class="progress-container" id="progressContainer">
        <div class="progress" id="progress"></div>
    </div>

    <div class="controls">
        <button id="prev">⏮</button>
        <button id="back">⏪</button>
        <button id="play" class="play-btn">▶</button>
        <button id="forward">⏩</button>
        <button id="next">⏭</button>
    </div>

    <div class="volume-container">
        <input type="range" id="volume" min="0" max="1" step="0.01">
    </div>
</div>

<audio id="audio"></audio>

<script>
const audio = document.getElementById("audio");
const playBtn = document.getElementById("play");
const prevBtn = document.getElementById("prev");
const nextBtn = document.getElementById("next");
const backBtn = document.getElementById("back");
const forwardBtn = document.getElementById("forward");
const progress = document.getElementById("progress");
const progressContainer = document.getElementById("progressContainer");
const volume = document.getElementById("volume");
const title = document.querySelector(".track-title");
const currentTimeEl = document.getElementById("current");
const durationEl = document.getElementById("duration");

let tracks = [];
let currentTrackIndex = 0;

fetch("music.json")
.then(res => res.json())
.then(data => {
    tracks = data;
    loadTrack(0);
});

function loadTrack(index) {
    currentTrackIndex = index;
    audio.src = "music/" + tracks[index];
    title.textContent = tracks[index].replace(".mp3", "");
}

function playTrack() {
    audio.play();
    playBtn.textContent = "⏸";
}

function pauseTrack() {
    audio.pause();
    playBtn.textContent = "▶";
}

playBtn.addEventListener("click", () => {
    if (audio.paused) playTrack();
    else pauseTrack();
});

prevBtn.addEventListener("click", () => {
    currentTrackIndex = (currentTrackIndex - 1 + tracks.length) % tracks.length;
    loadTrack(currentTrackIndex);
    playTrack();
});

nextBtn.addEventListener("click", () => {
    currentTrackIndex = (currentTrackIndex + 1) % tracks.length;
    loadTrack(currentTrackIndex);
    playTrack();
});

backBtn.addEventListener("click", () => {
    audio.currentTime -= 10;
});

forwardBtn.addEventListener("click", () => {
    audio.currentTime += 10;
});

audio.addEventListener("timeupdate", () => {
    const { currentTime, duration } = audio;
    const progressPercent = (currentTime / duration) * 100;
    progress.style.width = progressPercent + "%";
    currentTimeEl.textContent = formatTime(currentTime);
    durationEl.textContent = formatTime(duration);
});

progressContainer.addEventListener("click", e => {
    const width = progressContainer.clientWidth;
    const clickX = e.offsetX;
    audio.currentTime = (clickX / width) * audio.duration;
});

volume.addEventListener("input", e => {
    audio.volume = e.target.value;
});

audio.addEventListener("ended", () => {
    nextBtn.click();
});

function formatTime(time) {
    if (isNaN(time)) return "0:00";
    const minutes = Math.floor(time / 60);
    const seconds = Math.floor(time % 60).toString().padStart(2, "0");
    return `${minutes}:${seconds}`;
}

volume.value = 1;
audio.volume = 1;
</script>

</body>
</html>